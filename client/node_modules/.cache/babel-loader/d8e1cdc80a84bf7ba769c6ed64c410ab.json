{"ast":null,"code":"import _objectSpread from\"C:/Users/pamud/Desktop/mern/MERN/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/Users/pamud/Desktop/mern/MERN/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/pamud/Desktop/mern/MERN/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\pamud\\\\Desktop\\\\mern\\\\MERN\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useState,useEffect}from\"react\";import{useParams,useNavigate}from\"react-router\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Updateusers(){var _useState=useState({name:\"\",position:\"\",email:\"\",phone:\"\",address:\"\",id:\"\",faculty:\"\",specialization:\"\"}),_useState2=_slicedToArray(_useState,2),form=_useState2[0],setForm=_useState2[1];var params=useParams();var navigate=useNavigate();useEffect(function(){function fetchData(){return _fetchData.apply(this,arguments);}function _fetchData(){_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var id,response,message,user;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:id=params.id.toString();_context.next=3;return fetch(\"http://localhost:5000/user/\".concat(params.id.toString()));case 3:response=_context.sent;if(response.ok){_context.next=8;break;}message=\"An error has occurred: \".concat(response.statusText);window.alert(message);return _context.abrupt(\"return\");case 8:_context.next=10;return response.json();case 10:user=_context.sent;if(user){_context.next=15;break;}window.alert(\"User with id \".concat(id,\" not found\"));navigate(\"/\");return _context.abrupt(\"return\");case 15:setForm(user);case 16:case\"end\":return _context.stop();}}},_callee);}));return _fetchData.apply(this,arguments);}fetchData();return;},[params.id,navigate]);// These methods will update the state properties.\nfunction updateForm(value){return setForm(function(prev){return _objectSpread(_objectSpread({},prev),value);});}function onSubmit(_x){return _onSubmit.apply(this,arguments);}// This following section will display the form that takes input from the user to update the data.\nfunction _onSubmit(){_onSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var editedUser;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();console.log(\"dd\");editedUser={name:form.name,position:form.position,email:form.email,phone:form.phone,address:form.address,id:form.id,faculty:form.faculty,specialization:form.specialization};// This will send a post request to update the data in the database.\n_context2.next=5;return fetch(\"http://localhost:5000/user/update/\".concat(params.id),{method:\"POST\",body:JSON.stringify(editedUser),headers:{\"Content-Type\":\"application/json\"}});case 5:navigate(\"/userlist\");case 6:case\"end\":return _context2.stop();}}},_callee2);}));return _onSubmit.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Update User\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"name\",value:form.name,onChange:function onChange(e){return updateForm({name:e.target.value});}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"position\",children:\"Position\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"position\",value:form.position,onChange:function onChange(e){return updateForm({position:e.target.value});}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"email\",value:form.email,onChange:function onChange(e){return updateForm({email:e.target.value});}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"phone\",children:\"Contact Number\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"phone\",value:form.phone,onChange:function onChange(e){return updateForm({phone:e.target.value});}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"address\",children:\"Address\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"address\",value:form.address,onChange:function onChange(e){return updateForm({address:e.target.value});}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"id\",children:\"User ID\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"id\",value:form.id,onChange:function onChange(e){return updateForm({id:e.target.value});}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"faculty\",children:\"Faculty\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"faculty\",value:form.faculty,onChange:function onChange(e){return updateForm({faculty:e.target.value});}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"specialization\",children:\"Specialization\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"specialization\",value:form.specialization,onChange:function onChange(e){return updateForm({specialization:e.target.value});}})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Update User\",className:\"btn btn-primary\"})})]})]});}","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","Updateusers","name","position","email","phone","address","id","faculty","specialization","form","setForm","params","navigate","fetchData","toString","fetch","response","ok","message","statusText","window","alert","json","user","updateForm","value","prev","onSubmit","e","preventDefault","console","log","editedUser","method","body","JSON","stringify","headers","target"],"sources":["C:/Users/pamud/Desktop/mern/MERN/frontend/src/components/admin/Updateusers.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useParams, useNavigate } from \"react-router\";\r\n\r\nexport default function Updateusers() {\r\n  const [form, setForm] = useState({\r\n    name: \"\",\r\n    position: \"\",\r\n    email: \"\",\r\n    phone: \"\",\r\n    address: \"\",\r\n    id: \"\",\r\n    faculty: \"\",\r\n    specialization: \"\",\r\n\r\n  });\r\n  const params = useParams();\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      const id = params.id.toString();\r\n      const response = await fetch(\r\n        `http://localhost:5000/user/${params.id.toString()}`\r\n      );\r\n\r\n      if (!response.ok) {\r\n        const message = `An error has occurred: ${response.statusText}`;\r\n        window.alert(message);\r\n        return;\r\n      }\r\n\r\n      const user = await response.json();\r\n      if (!user) {\r\n        window.alert(`User with id ${id} not found`);\r\n        navigate(\"/\");\r\n        return;\r\n      }\r\n\r\n      setForm(user);\r\n    }\r\n\r\n    fetchData();\r\n\r\n    return;\r\n  }, [params.id, navigate]);\r\n\r\n  // These methods will update the state properties.\r\n  function updateForm(value) {\r\n    return setForm((prev) => {\r\n      return { ...prev, ...value };\r\n    });\r\n  }\r\n\r\n  async function onSubmit(e) {\r\n    e.preventDefault();\r\n    console.log(\"dd\");\r\n    const editedUser = {\r\n      name: form.name,\r\n      position: form.position,\r\n      email: form.email,\r\n      phone: form.phone,\r\n      address: form.address,\r\n      id: form.id,\r\n      faculty: form.faculty,\r\n      specialization: form.specialization,\r\n    };\r\n\r\n    // This will send a post request to update the data in the database.\r\n    await fetch(`http://localhost:5000/user/update/${params.id}`, {\r\n      method: \"POST\",\r\n      body: JSON.stringify(editedUser),\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    });\r\n\r\n    navigate(\"/userlist\");\r\n  }\r\n\r\n  // This following section will display the form that takes input from the user to update the data.\r\n  return (\r\n    <div className=\"container\">\r\n        <h3>Update User</h3>\r\n        <form onSubmit={onSubmit}>\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"name\">Name</label>\r\n            <input\r\n              type=\"text\"\r\n              className=\"form-control\"\r\n              id=\"name\"\r\n              value={form.name}\r\n              onChange={(e) => updateForm({ name: e.target.value })}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"position\">Position</label>\r\n            <input\r\n              type=\"text\"\r\n              className=\"form-control\"\r\n              id=\"position\"\r\n              value={form.position}\r\n              onChange={(e) => updateForm({ position: e.target.value })}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"email\">Email</label>\r\n            <input\r\n              type=\"text\"\r\n              className=\"form-control\"\r\n              id=\"email\"\r\n              value={form.email}\r\n              onChange={(e) => updateForm({ email: e.target.value })}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"phone\">Contact Number</label>\r\n            <input\r\n              type=\"text\"\r\n              className=\"form-control\"\r\n              id=\"phone\"\r\n              value={form.phone}\r\n              onChange={(e) => updateForm({  phone: e.target.value })}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"address\">Address</label>\r\n            <input\r\n              type=\"text\"\r\n              className=\"form-control\"\r\n              id=\"address\"\r\n              value={form.address}\r\n              onChange={(e) => updateForm({ address: e.target.value })}\r\n            />\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"id\">User ID</label>\r\n            <input\r\n              type=\"text\"\r\n              className=\"form-control\"\r\n              id=\"id\"\r\n              value={form.id}\r\n              onChange={(e) => updateForm({ id: e.target.value })}\r\n            />\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"faculty\">Faculty</label>\r\n            <input\r\n              type=\"text\"\r\n              className=\"form-control\"\r\n              id=\"faculty\"\r\n              value={form.faculty}\r\n              onChange={(e) => updateForm({ faculty: e.target.value })}\r\n            />\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"specialization\">Specialization</label>\r\n            <input\r\n              type=\"text\"\r\n              className=\"form-control\"\r\n              id=\"specialization\"\r\n              value={form.specialization}\r\n              onChange={(e) => updateForm({ specialization: e.target.value })}\r\n            />\r\n          </div>\r\n\r\n      <div className=\"form-group\">\r\n        <input\r\n          type=\"submit\"\r\n          value=\"Update User\"\r\n          className=\"btn btn-primary\"\r\n        />\r\n      </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}